<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Model Viewer</title>

<style>
:root{
  --bg:#060911;
  --white:#ffffff;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  min-height:100dvh;
  background:
    radial-gradient(circle at top,#1c2550,transparent 55%),
    linear-gradient(180deg,#05070d,var(--bg));
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  color:var(--white);
}

/* ---------- Card ---------- */
.card{
  width:340px;
  padding:36px 30px;
  border-radius:22px;
  background:linear-gradient(
    180deg,
    rgba(255,255,255,0.1),
    rgba(255,255,255,0.03)
  );
  backdrop-filter:blur(20px);
  box-shadow:
    0 40px 80px rgba(0,0,0,0.7),
    inset 0 0 0 1px rgba(255,255,255,0.06);
  text-align:center;
}

h1{font-size:22px;margin:0 0 6px}
p{font-size:14px;opacity:.85;margin-bottom:26px}

/* ---------- Button ---------- */
button{
  width:100%;
  padding:16px 0;
  border-radius:16px;
  border:none;
  font-size:18px;
  font-weight:500;
  color:#000;
  background:linear-gradient(135deg,#ffffff,#e4e8ff);
  box-shadow:0 16px 40px rgba(255,255,255,.35);
  cursor:pointer;
}
button.disabled{opacity:.55;pointer-events:none}

/* ---------- Loader ---------- */
.loader{display:none;margin-top:28px}

/* ---------- Particle Stage ---------- */
.stage{
  width:150px;
  height:150px;
  margin:0 auto 18px;
  position:relative;
  perspective:1600px;
}

.cloud{
  position:absolute;
  inset:0;
  transform-style:preserve-3d;
  animation:spin 18s linear infinite;
}

@keyframes spin{
  from{transform:rotateX(0deg) rotateY(0deg)}
  to{transform:rotateX(360deg) rotateY(360deg)}
}

/* ---------- Particle ---------- */
.dot{
  position:absolute;
  border-radius:50%;
  background:radial-gradient(
    circle,
    rgba(255,255,255,1) 0%,
    rgba(255,255,255,.85) 35%,
    rgba(255,255,255,.35) 55%,
    transparent 70%
  );
  transform-style:preserve-3d;
}

/* ---------- Progress ---------- */
.progress{
  font-size:14px;
  letter-spacing:.4px;
  animation:pulse 1.5s ease-in-out infinite;
}
@keyframes pulse{
  0%,100%{opacity:.6}
  50%{opacity:1}
}

.bar{
  height:4px;
  width:100%;
  background:rgba(255,255,255,.18);
  border-radius:10px;
  overflow:hidden;
  margin-top:10px;
}
.bar span{
  display:block;
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#ffffff,#e4e8ff);
  transition:.2s linear;
}

/* ---------- PAGE 2 ---------- */
.page.next{
  display:none;
}
</style>
</head>

<body>

<div class="card" id="card">

  <!-- PAGE 1 -->
  <div id="page1">
    <h1>3D Object Viewer</h1>
    <p>High-fidelity interactive preview</p>

    <button id="openBtn">View 3D Model</button>

    <div class="loader" id="loader">
      <div class="stage">
        <div class="cloud" id="cloud"></div>
      </div>
      <div class="progress" id="text">Opening 3D model… 0%</div>
      <div class="bar"><span id="bar"></span></div>
    </div>
  </div>

  <!-- PAGE 2 -->
  <div class="page next" id="page2">
    <h1>Thanks for viewing</h1>
    <p>The 3D experience has finished.</p>
    <p style="opacity:.6;font-size:13px">
      You can continue with the next step here.
    </p>
  </div>

</div>

<a id="ar" href="modelhugworld.usdz" rel="ar" style="display:none"></a>
<a id="android3d" href="modelhugworld.glb" target="_blank" style="display:none"></a>

<script>
const cloud=document.getElementById('cloud');
const COUNT=720;
const R=60;

for(let i=0;i<COUNT;i++){
  const d=document.createElement('div');
  d.className='dot';

  const t=Math.random()*Math.PI*2;
  const p=Math.acos(2*Math.random()-1);
  const r=R+Math.random()*4;

  const x=r*Math.sin(p)*Math.cos(t);
  const y=r*Math.sin(p)*Math.sin(t);
  const z=r*Math.cos(p);

  const depth=(z+R)/(2*R);
  const size=0.8 + depth*1.1;

  d.style.width=size+'px';
  d.style.height=size+'px';
  d.style.left=(75+x)+'px';
  d.style.top=(75+y)+'px';
  d.style.transform=`translateZ(${z}px)`;
  d.style.opacity=0.55 + depth*0.45;

  cloud.appendChild(d);
}

const btn=document.getElementById('openBtn');
const loader=document.getElementById('loader');
const text=document.getElementById('text');
const bar=document.getElementById('bar');
const ar=document.getElementById('ar');
const android3d=document.getElementById('android3d');

const page1=document.getElementById('page1');
const page2=document.getElementById('page2');

let arOpened=false;

btn.onclick=()=>{
  btn.classList.add('disabled');
  btn.textContent='Initializing…';
  loader.style.display='block';

  let p=0;
  const timer=setInterval(()=>{
    p+=Math.random()*9;
    if(p>=100){
      p=100;
      clearInterval(timer);
      text.textContent='Launching…';
      arOpened=true;

      const ua=navigator.userAgent.toLowerCase();
      if(ua.includes('android')){
        setTimeout(()=>android3d.click(),650);
      }else{
        setTimeout(()=>ar.click(),650);
      }
    }else{
      text.textContent=`Opening 3D model… ${Math.floor(p)}%`;
    }
    bar.style.width=p+'%';
  },180);
};

document.addEventListener('visibilitychange',()=>{
  if(!document.hidden && arOpened){
    page1.style.display='none';
    page2.style.display='block';
  }
});
</script>

</body>
</html>
